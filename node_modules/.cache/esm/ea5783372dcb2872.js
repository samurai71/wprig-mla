/* eslint-env es6 */
'use strict';;let fs,rimraf,filesToMock,prodThemePath,paths;_2dc‍.w("fs",[["default",["fs"],function(v){fs=v}]]);_2dc‍.w("rimraf",[["default",["rimraf"],function(v){rimraf=v}]]);_2dc‍.w("./prod-build.utils",[["filesToMock",["filesToMock"],function(v){filesToMock=v}]]);_2dc‍.w("../../constants",[["prodThemePath",["prodThemePath"],function(v){prodThemePath=v}],["paths",["paths"],function(v){paths=v}]]);

/**
 * External dependencies
 */



/**
 * Internal dependencies
 */






// Delete the mock files after testing.
filesToMock.forEach( ( file ) => {
	// Delete the mock file
	if ( fs.existsSync( file.dest ) ) {
		fs.unlinkSync( file.dest );
	}

	// Check if a previous version of the file exists
	const existingFile = file.dest.replace( /(\.[\w-]+)$/i, '-existing$1' );
	const existingFileExists = fs.existsSync( existingFile );
	if ( existingFileExists ) {
		// If it does, rename it back to the original file name
		fs.renameSync( existingFile, file.dest );
	}
} );

// Delete the dev .pot file
if ( fs.existsSync( paths.languages.potSrc ) ) {
	fs.unlinkSync( paths.languages.potSrc );
}

// Delete the prod theme directory after testing.
if ( fs.existsSync( prodThemePath ) ) {
	rimraf.sync( prodThemePath );
}
